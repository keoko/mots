class I{withFields(Z){let Q=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...Q)}}class IZ{static fromArray(Z,Q){let J=Q||new z;for(let K=Z.length-1;K>=0;--K)J=new zZ(Z[K],J);return J}[Symbol.iterator](){return new rJ(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof z}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function U(Z,Q){return new zZ(Z,Q)}function H(Z,Q){return IZ.fromArray(Z,Q)}class rJ{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof z)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class z extends IZ{}class zZ extends IZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class X6{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return TQ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let K=0;K<Q;K++)if(this.rawBuffer[K]!==Z.rawBuffer[K])return!1;let J=this.bitSize%8;if(J){let K=8-J;if(this.rawBuffer[Q]>>K!==Z.rawBuffer[Q]>>K)return!1}}else{for(let K=0;K<Q;K++){let X=TQ(this.rawBuffer,this.bitOffset,K),G=TQ(Z.rawBuffer,Z.bitOffset,K);if(X!==G)return!1}let J=this.bitSize%8;if(J){let K=TQ(this.rawBuffer,this.bitOffset,Q),X=TQ(Z.rawBuffer,Z.bitOffset,Q),G=8-J;if(K>>G!==X>>G)return!1}}return!0}get buffer(){if(sJ("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(sJ("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function TQ(Z,Q,J){if(Q===0)return Z[J]??0;else{let K=Z[J]<<Q&255,X=Z[J+1]>>8-Q;return K|X}}class E6{constructor(Z){this.value=Z}}var dJ={};function sJ(Z,Q){if(dJ[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),dJ[Z]=!0}class CQ extends I{static isResult(Z){return Z instanceof CQ}}class y extends CQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class x extends CQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function t(Z,Q){let J=[Z,Q];while(J.length){let K=J.pop(),X=J.pop();if(K===X)continue;if(!lJ(K)||!lJ(X))return!1;if(!V0(K,X)||Z0(K,X)||Q0(K,X)||J0(K,X)||K0(K,X)||X0(K,X)||G0(K,X))return!1;let V=Object.getPrototypeOf(K);if(V!==null&&typeof V.equals==="function")try{if(K.equals(X))continue;else return!1}catch{}let[W,Y]=e9(K),M=W(K),F=W(X);if(M.length!==F.length)return!1;for(let q of M)J.push(Y(K,q),Y(X,q))}return!0}function e9(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,J)=>Q.get(J)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...Q,...Object.keys(J)],(J,K)=>J[K]]}}function Z0(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function Q0(Z,Q){return!(Z instanceof X6)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((J,K)=>J===Q[K]))}function J0(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function K0(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function X0(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((J)=>!Q.has(J)))}function G0(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function lJ(Z){return typeof Z==="object"&&Z!==null}function V0(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((K)=>Z instanceof K))return!1;return Z.constructor===Q.constructor}function G6(Z,Q){return Math.trunc(x6(Z,Q))}function x6(Z,Q){if(Q===0)return 0;else return Z/Q}function k6(Z,Q,J,K,X,G,V){let W=new globalThis.Error(G);W.gleam_error=Z,W.file=Q,W.module=J,W.line=K,W.function=X,W.fn=X;for(let Y in V)W[Y]=V[Y];return W}class a extends I{}class n extends I{}class cZ extends I{}class NZ extends I{}var aJ=new WeakMap,y6=new DataView(new ArrayBuffer(8)),b6=0;function g6(Z){let Q=aJ.get(Z);if(Q!==void 0)return Q;let J=b6++;if(b6===2147483647)b6=0;return aJ.set(Z,J),J}function f6(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function h6(Z){let Q=0,J=Z.length;for(let K=0;K<J;K++)Q=Math.imul(31,Q)+Z.charCodeAt(K)|0;return Q}function iJ(Z){y6.setFloat64(0,Z);let Q=y6.getInt32(0),J=y6.getInt32(4);return Math.imul(73244475,Q>>16^Q)^J}function W0(Z){return h6(Z.toString())}function Y0(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let K=Z.hashCode(Z);if(typeof K==="number")return K}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return g6(Z);if(Z instanceof Date)return iJ(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let K=0;K<Z.length;K++)J=Math.imul(31,J)+UZ(Z[K])|0;else if(Z instanceof Set)Z.forEach((K)=>{J=J+UZ(K)|0});else if(Z instanceof Map)Z.forEach((K,X)=>{J=J+f6(UZ(K),UZ(X))|0});else{let K=Object.keys(Z);for(let X=0;X<K.length;X++){let G=K[X],V=Z[G];J=J+f6(UZ(V),h6(G))|0}}return J}function UZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return iJ(Z);case"string":return h6(Z);case"bigint":return W0(Z);case"object":return Y0(Z);case"symbol":return g6(Z);case"function":return g6(Z);default:return 0}}var CZ=5,_6=Math.pow(2,CZ),H0=_6-1,M0=_6/2,U0=_6/4,QZ=0,TZ=1,YZ=2,oZ=3,u6={type:YZ,bitmap:0,array:[]};function LQ(Z,Q){return Z>>>Q&H0}function W6(Z,Q){return 1<<LQ(Z,Q)}function F0(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function m6(Z,Q){return F0(Z&Q-1)}function FZ(Z,Q,J){let K=Z.length,X=Array(K);for(let G=0;G<K;++G)X[G]=Z[G];return X[Q]=J,X}function R0(Z,Q,J){let K=Z.length,X=Array(K+1),G=0,V=0;while(G<Q)X[V++]=Z[G++];X[V++]=J;while(G<K)X[V++]=Z[G++];return X}function v6(Z,Q){let J=Z.length,K=Array(J-1),X=0,G=0;while(X<Q)K[G++]=Z[X++];++X;while(X<J)K[G++]=Z[X++];return K}function oJ(Z,Q,J,K,X,G){let V=UZ(Q);if(V===K)return{type:oZ,hash:V,array:[{type:QZ,k:Q,v:J},{type:QZ,k:X,v:G}]};let W={val:!1};return wQ($6(u6,Z,V,Q,J,W),Z,K,X,G,W)}function wQ(Z,Q,J,K,X,G){switch(Z.type){case TZ:return q0(Z,Q,J,K,X,G);case YZ:return $6(Z,Q,J,K,X,G);case oZ:return I0(Z,Q,J,K,X,G)}}function q0(Z,Q,J,K,X,G){let V=LQ(J,Q),W=Z.array[V];if(W===void 0)return G.val=!0,{type:TZ,size:Z.size+1,array:FZ(Z.array,V,{type:QZ,k:K,v:X})};if(W.type===QZ){if(t(K,W.k)){if(X===W.v)return Z;return{type:TZ,size:Z.size,array:FZ(Z.array,V,{type:QZ,k:K,v:X})}}return G.val=!0,{type:TZ,size:Z.size,array:FZ(Z.array,V,oJ(Q+CZ,W.k,W.v,J,K,X))}}let Y=wQ(W,Q+CZ,J,K,X,G);if(Y===W)return Z;return{type:TZ,size:Z.size,array:FZ(Z.array,V,Y)}}function $6(Z,Q,J,K,X,G){let V=W6(J,Q),W=m6(Z.bitmap,V);if((Z.bitmap&V)!==0){let Y=Z.array[W];if(Y.type!==QZ){let F=wQ(Y,Q+CZ,J,K,X,G);if(F===Y)return Z;return{type:YZ,bitmap:Z.bitmap,array:FZ(Z.array,W,F)}}let M=Y.k;if(t(K,M)){if(X===Y.v)return Z;return{type:YZ,bitmap:Z.bitmap,array:FZ(Z.array,W,{type:QZ,k:K,v:X})}}return G.val=!0,{type:YZ,bitmap:Z.bitmap,array:FZ(Z.array,W,oJ(Q+CZ,M,Y.v,J,K,X))}}else{let Y=Z.array.length;if(Y>=M0){let M=Array(32),F=LQ(J,Q);M[F]=$6(u6,Q+CZ,J,K,X,G);let q=0,D=Z.bitmap;for(let j=0;j<32;j++){if((D&1)!==0){let S=Z.array[q++];M[j]=S}D=D>>>1}return{type:TZ,size:Y+1,array:M}}else{let M=R0(Z.array,W,{type:QZ,k:K,v:X});return G.val=!0,{type:YZ,bitmap:Z.bitmap|V,array:M}}}}function I0(Z,Q,J,K,X,G){if(J===Z.hash){let V=c6(Z,K);if(V!==-1){if(Z.array[V].v===X)return Z;return{type:oZ,hash:J,array:FZ(Z.array,V,{type:QZ,k:K,v:X})}}let W=Z.array.length;return G.val=!0,{type:oZ,hash:J,array:FZ(Z.array,W,{type:QZ,k:K,v:X})}}return wQ({type:YZ,bitmap:W6(Z.hash,Q),array:[Z]},Q,J,K,X,G)}function c6(Z,Q){let J=Z.array.length;for(let K=0;K<J;K++)if(t(Q,Z.array[K].k))return K;return-1}function V6(Z,Q,J,K){switch(Z.type){case TZ:return z0(Z,Q,J,K);case YZ:return N0(Z,Q,J,K);case oZ:return D0(Z,K)}}function z0(Z,Q,J,K){let X=LQ(J,Q),G=Z.array[X];if(G===void 0)return;if(G.type!==QZ)return V6(G,Q+CZ,J,K);if(t(K,G.k))return G;return}function N0(Z,Q,J,K){let X=W6(J,Q);if((Z.bitmap&X)===0)return;let G=m6(Z.bitmap,X),V=Z.array[G];if(V.type!==QZ)return V6(V,Q+CZ,J,K);if(t(K,V.k))return V;return}function D0(Z,Q){let J=c6(Z,Q);if(J<0)return;return Z.array[J]}function p6(Z,Q,J,K){switch(Z.type){case TZ:return O0(Z,Q,J,K);case YZ:return S0(Z,Q,J,K);case oZ:return j0(Z,K)}}function O0(Z,Q,J,K){let X=LQ(J,Q),G=Z.array[X];if(G===void 0)return Z;let V=void 0;if(G.type===QZ){if(!t(G.k,K))return Z}else if(V=p6(G,Q+CZ,J,K),V===G)return Z;if(V===void 0){if(Z.size<=U0){let W=Z.array,Y=Array(Z.size-1),M=0,F=0,q=0;while(M<X){let D=W[M];if(D!==void 0)Y[F]=D,q|=1<<M,++F;++M}++M;while(M<W.length){let D=W[M];if(D!==void 0)Y[F]=D,q|=1<<M,++F;++M}return{type:YZ,bitmap:q,array:Y}}return{type:TZ,size:Z.size-1,array:FZ(Z.array,X,V)}}return{type:TZ,size:Z.size,array:FZ(Z.array,X,V)}}function S0(Z,Q,J,K){let X=W6(J,Q);if((Z.bitmap&X)===0)return Z;let G=m6(Z.bitmap,X),V=Z.array[G];if(V.type!==QZ){let W=p6(V,Q+CZ,J,K);if(W===V)return Z;if(W!==void 0)return{type:YZ,bitmap:Z.bitmap,array:FZ(Z.array,G,W)};if(Z.bitmap===X)return;return{type:YZ,bitmap:Z.bitmap^X,array:v6(Z.array,G)}}if(t(K,V.k)){if(Z.bitmap===X)return;return{type:YZ,bitmap:Z.bitmap^X,array:v6(Z.array,G)}}return Z}function j0(Z,Q){let J=c6(Z,Q);if(J<0)return Z;if(Z.array.length===1)return;return{type:oZ,hash:Z.hash,array:v6(Z.array,J)}}function tJ(Z,Q){if(Z===void 0)return;let J=Z.array,K=J.length;for(let X=0;X<K;X++){let G=J[X];if(G===void 0)continue;if(G.type===QZ){Q(G.v,G.k);continue}tJ(G,Q)}}class WZ{static fromObject(Z){let Q=Object.keys(Z),J=WZ.new();for(let K=0;K<Q.length;K++){let X=Q[K];J=J.set(X,Z[X])}return J}static fromMap(Z){let Q=WZ.new();return Z.forEach((J,K)=>{Q=Q.set(K,J)}),Q}static new(){return new WZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let J=V6(this.root,0,UZ(Z),Z);if(J===void 0)return Q;return J.v}set(Z,Q){let J={val:!1},K=this.root===void 0?u6:this.root,X=wQ(K,0,UZ(Z),Z,Q,J);if(X===this.root)return this;return new WZ(X,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=p6(this.root,0,UZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return WZ.new();return new WZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return V6(this.root,0,UZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,J)=>Z.push([J,Q])),Z}forEach(Z){tJ(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,J)=>{Z=Z+f6(UZ(Q),UZ(J))|0}),Z}equals(Z){if(!(Z instanceof WZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,J)=>{if(!t(Z.get(J,!Q),Q))throw nJ}),!0}catch(Q){if(Q===nJ)return!1;throw Q}}}var nJ=Symbol();function EQ(Z,Q,J){return Q8(Q,J,Z)}function A0(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else{let X=J.head;Z=J.tail,Q=U(X,K)}}}function B0(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return A0(K,H([]));else{let X=J.tail,G=J.head[0];Z=X,Q=U(G,K)}}}function xQ(Z){return B0(Z8(Z),H([]))}class ZZ extends I{}class RQ extends I{}function T0(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else Z=J.tail,Q=K+1}}function K8(Z){return T0(Z,0)}function kQ(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else{let X=J.head;Z=J.tail,Q=U(X,K)}}}function i(Z){return kQ(Z,H([]))}function Y6(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return!1;else{let X=J.head;if(t(X,K))return!0;else Z=J.tail,Q=K}}}function C0(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return i(G);else{let V=K.head;Z=K.tail,Q=X,J=U(X(V),G)}}}function tZ(Z,Q){return C0(Z,Q,H([]))}function L0(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else{let X=J.head;Z=J.tail,Q=U(X,K)}}}function d6(Z,Q){return L0(i(Z),Q)}function H6(Z,Q){return U(Q,Z)}function XZ(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return X;else{let V=K.head;Z=K.tail,Q=G(X,V),J=G}}}function w0(Z,Q,J,K,X,G){while(!0){let V=Z,W=Q,Y=J,M=K,F=X,q=G,D=U(F,Y);if(V instanceof z)if(M instanceof ZZ)return U(i(D),q);else return U(D,q);else{let{head:j,tail:S}=V,T=W(F,j);if(M instanceof ZZ)if(T instanceof a)Z=S,Q=W,J=D,K=M,X=j,G=q;else if(T instanceof n)Z=S,Q=W,J=D,K=M,X=j,G=q;else{let N;if(M instanceof ZZ)N=U(i(D),q);else N=U(D,q);let C=N;if(S instanceof z)return U(H([j]),C);else{let{head:O,tail:B}=S,w,R=W(j,O);if(R instanceof a)w=new ZZ;else if(R instanceof n)w=new ZZ;else w=new RQ;let A=w;Z=B,Q=W,J=H([j]),K=A,X=O,G=C}}else if(T instanceof a){let N;if(M instanceof ZZ)N=U(i(D),q);else N=U(D,q);let C=N;if(S instanceof z)return U(H([j]),C);else{let{head:O,tail:B}=S,w,R=W(j,O);if(R instanceof a)w=new ZZ;else if(R instanceof n)w=new ZZ;else w=new RQ;let A=w;Z=B,Q=W,J=H([j]),K=A,X=O,G=C}}else if(T instanceof n){let N;if(M instanceof ZZ)N=U(i(D),q);else N=U(D,q);let C=N;if(S instanceof z)return U(H([j]),C);else{let{head:O,tail:B}=S,w,R=W(j,O);if(R instanceof a)w=new ZZ;else if(R instanceof n)w=new ZZ;else w=new RQ;let A=w;Z=B,Q=W,J=H([j]),K=A,X=O,G=C}}else Z=S,Q=W,J=D,K=M,X=j,G=q}}}function E0(Z,Q,J,K){while(!0){let X=Z,G=Q,V=J,W=K;if(X instanceof z)return kQ(G,W);else if(G instanceof z)return kQ(X,W);else{let{head:Y,tail:M}=X,F=G.head,q=G.tail,D=V(Y,F);if(D instanceof a)Z=M,Q=G,J=V,K=U(Y,W);else if(D instanceof n)Z=X,Q=q,J=V,K=U(F,W);else Z=X,Q=q,J=V,K=U(F,W)}}}function x0(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return i(G);else{let V=K.tail;if(V instanceof z){let W=K.head;return i(U(i(W),G))}else{let W=K.head,Y=V.head,M=V.tail,F=E0(W,Y,X,H([]));Z=M,Q=X,J=U(F,G)}}}}function k0(Z,Q,J,K){while(!0){let X=Z,G=Q,V=J,W=K;if(X instanceof z)return kQ(G,W);else if(G instanceof z)return kQ(X,W);else{let{head:Y,tail:M}=X,F=G.head,q=G.tail,D=V(Y,F);if(D instanceof a)Z=X,Q=q,J=V,K=U(F,W);else if(D instanceof n)Z=M,Q=G,J=V,K=U(Y,W);else Z=M,Q=G,J=V,K=U(Y,W)}}}function y0(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return i(G);else{let V=K.tail;if(V instanceof z){let W=K.head;return i(U(i(W),G))}else{let W=K.head,Y=V.head,M=V.tail,F=k0(W,Y,X,H([]));Z=M,Q=X,J=U(F,G)}}}}function b0(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return K;else if(X instanceof ZZ)if(K.tail instanceof z)return K.head;else Z=x0(K,G,H([])),Q=new RQ,J=G;else if(K.tail instanceof z){let W=K.head;return i(W)}else Z=y0(K,G,H([])),Q=new ZZ,J=G}}function X8(Z,Q){if(Z instanceof z)return Z;else{let J=Z.tail;if(J instanceof z)return Z;else{let K=Z.head,X=J.head,G=J.tail,V,W=Q(K,X);if(W instanceof a)V=new ZZ;else if(W instanceof n)V=new ZZ;else V=new RQ;let Y=V,M=w0(G,Q,H([K]),Y,X,H([]));return b0(M,new ZZ,Q)}}}function G8(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return;else{let{head:X,tail:G}=J;K(X),Z=G,Q=K}}}function m0(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else{let X=J.head;Z=J.tail,Q=K+X}}}function M8(Z){return m0(Z,"")}function $0(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return G;else{let V=K.head;Z=K.tail,Q=X,J=G+X+V}}}function bQ(Z,Q){if(Z instanceof z)return"";else{let{head:J,tail:K}=Z;return $0(K,Q,J)}}class l6 extends I{constructor(Z){super();this.function=Z}}function QQ(Z,Q){let J=Q.function(Z),K,X;if(K=J[0],X=J[1],X instanceof z)return new y(K);else return new x(X)}function r6(Z){return new l6((Q)=>{return[Z,H([])]})}function R6(Z,Q){return new l6((J)=>{let K=Z.function(J),X,G;return X=K[0],G=K[1],[Q(X),G]})}var l0=void 0,R8={};function HZ(Z){return Z.toString()}function M6(Z){let Q=r0(Z);if(Q)return IZ.fromArray(Array.from(Q).map((J)=>J.segment));else return IZ.fromArray(Z.match(/./gsu))}var q8=void 0;function r0(Z){if(globalThis.Intl&&Intl.Segmenter)return q8||=new Intl.Segmenter,q8.segment(Z)[Symbol.iterator]()}function ZQ(Z){return Z.toLowerCase()}function U6(Z){return Z.toUpperCase()}function F6(Z,Q){return Z.indexOf(Q)>=0}function s6(Z,Q){return Z.startsWith(Q)}var I8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),pG=new RegExp(`^[${I8}]*`),dG=new RegExp(`[${I8}]*$`);function FQ(){return WZ.new()}function Z8(Z){return IZ.fromArray(Z.entries())}function pZ(Z,Q){let J=Z.get(Q,R8);if(J===R8)return new x(l0);return new y(J)}function Q8(Z,Q,J){return J.set(Z,Q)}function z8(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let J=Q.indexOf("e");if(J>=0)return Q.slice(0,J)+".0"+Q.slice(J);else return Q+".0"}}class a0{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#G(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return z8(Z);if(Z instanceof E6)return this.#W(Z);if(Z instanceof X6)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let K=[];for(let X of Array(Z.length).keys())K.push(String.fromCharCode(X+97));return`//fn(${K.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((K)=>this.inspect(K)).join(", ")})`;else if(Z instanceof IZ)J=this.#Q(Z);else if(Z instanceof I)J=this.#J(Z);else if(Z instanceof WZ)J=this.#K(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((K)=>this.inspect(K)).join(", ")}))`;else J=this.#X(Z);return this.#Z.delete(Z),J}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let G of Object.keys(Z))J.push(`${this.inspect(G)}: ${this.inspect(Z[G])}`);let K=J.length?" "+J.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${K}})`}#K(Z){let Q="dict.from_list([",J=!0;return Z.forEach((K,X)=>{if(!J)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(K)+")",J=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((J)=>{let K=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${K}`:K}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof z)return"[]";let Q='charlist.from_string("',J="[",K=Z;while(K instanceof zZ){let X=K.head;if(K=K.tail,J!=="[")J+=", ";if(J+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return J+"]"}#G(Z){let Q='"';for(let J=0;J<Z.length;J++){let K=Z[J];switch(K){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(K<" "||K>"~"&&K<" ")Q+="\\u{"+K.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=K}}return Q+='"',Q}#W(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let J=0;J<Z.byteSize-1;J++)Q+=Z.byteAt(J).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-J,Q+=`:size(${J})`}return Q+=">>",Q}}function O8(Z,Q,J){if(Z)return Q;else return J()}function l(Z){return Z}function gQ(Z){return Z}function a6(Z){return gQ(Z)}var qZ=()=>globalThis?.document,I6="http://www.w3.org/1999/xhtml",z6=1,n6=3;var A8=!!globalThis.HTMLElement?.prototype?.moveBefore;var L=H([]),N6=new NZ;var KK=new cZ,XK=new a,GK=new n;function D6(Z,Q){if(Z.name===Q.name)return GK;else if(Z.name<Q.name)return XK;else return KK}class xZ extends I{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class fQ extends I{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class GZ extends I{constructor(Z,Q,J,K,X,G,V,W,Y){super();this.kind=Z,this.name=Q,this.handler=J,this.include=K,this.prevent_default=X,this.stop_propagation=G,this.immediate=V,this.debounce=W,this.throttle=Y}}class vQ extends I{constructor(Z,Q,J){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=J}}class L8 extends I{constructor(Z){super();this.kind=Z}}function UK(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return K;else{let X=J.head;if(X instanceof xZ){let G=X.name;if(G==="")Z=J.tail,Q=K;else if(G==="class"){let V=X.value;if(V==="")Z=J.tail,Q=K;else{let W=J.tail;if(W instanceof z){let Y=X;Z=W,Q=U(Y,K)}else{let Y=W.head;if(Y instanceof xZ)if(Y.name==="class"){let F=X.kind,q=V,D=W.tail,j=Y.value,S=q+" "+j,T=new xZ(F,"class",S);Z=U(T,D),Q=K}else{let F=X;Z=W,Q=U(F,K)}else{let M=X;Z=W,Q=U(M,K)}}}}else if(G==="style"){let V=X.value;if(V==="")Z=J.tail,Q=K;else{let W=J.tail;if(W instanceof z){let Y=X;Z=W,Q=U(Y,K)}else{let Y=W.head;if(Y instanceof xZ)if(Y.name==="style"){let F=X.kind,q=V,D=W.tail,j=Y.value,S=q+";"+j,T=new xZ(F,"style",S);Z=U(T,D),Q=K}else{let F=X;Z=W,Q=U(F,K)}else{let M=X;Z=W,Q=U(M,K)}}}}else{let V=X;Z=J.tail,Q=U(V,K)}}else{let G=X;Z=J.tail,Q=U(G,K)}}}}function w8(Z){if(Z instanceof z)return Z;else if(Z.tail instanceof z)return Z;else{let K=X8(Z,(X,G)=>{return D6(G,X)});return UK(K,L)}}var t6=0;function E8(Z,Q){return new xZ(t6,Z,Q)}var e6=1;function x8(Z,Q){return new fQ(e6,Z,Q)}var ZJ=2;function k8(Z,Q,J,K,X,G,V,W){return new GZ(ZJ,Z,Q,J,K,X,G,V,W)}var QJ=0;var JJ=new L8(QJ);var KJ=2;function hQ(Z,Q){return E8(Z,Q)}function y8(Z,Q){return x8(Z,Q)}function RK(Z,Q){if(Q)return hQ(Z,"");else return y8(Z,a6(!1))}function o(Z){return hQ("class",Z)}function b8(Z){return RK("disabled",Z)}class XJ extends I{constructor(Z,Q,J){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=J}}class g8 extends I{constructor(Z,Q,J,K,X){super();this.dispatch=Z,this.emit=Q,this.select=J,this.root=K,this.provide=X}}function f8(Z,Q,J,K,X,G){let V=new g8(Q,J,K,X,G);return G8(Z.synchronous,(W)=>{return W(V)})}var v8=new XJ(H([]),H([]),H([]));function _Q(){return v8}function h8(Z){return XZ(Z,v8,(Q,J)=>{return new XJ(XZ(J.synchronous,Q.synchronous,H6),XZ(J.before_paint,Q.before_paint,H6),XZ(J.after_paint,Q.after_paint,H6))})}function MZ(){return null}function mQ(Z,Q){let J=Z?.get(Q);if(J!=null)return new y(J);else return new x(void 0)}function $Q(Z,Q){return Z&&Z.has(Q)}function JQ(Z,Q,J){return Z??=new Map,Z.set(Q,J),Z}function GJ(Z,Q){return Z?.delete(Q),Z}class VJ extends I{}class WJ extends I{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class _8 extends I{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function qK(Z,Q){while(!0){let J=Z,K=Q;if(K instanceof z)return!1;else{let{head:X,tail:G}=K,V=s6(J,X);if(V)return V;else Z=J,Q=G}}}function OZ(Z,Q,J){if(J==="")return new _8(Q,Z);else return new WJ(J,Z)}var O6=new VJ,pQ="\t";function u8(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof VJ)if(K instanceof z)return"";else{let X=K.tail;return M8(X)}else if(J instanceof WJ){let X=J.key;Z=J.parent,Q=U(pQ,U(X,K))}else{let X=J.index;Z=J.parent,Q=U(pQ,U(HZ(X),K))}}}function IK(Z){return u8(Z,H([]))}function m8(Z,Q){if(Q instanceof z)return!1;else return qK(IK(Z),Q)}var YJ=`
`;function HJ(Z,Q){return u8(Z,H([YJ,Q]))}class SZ extends I{constructor(Z,Q,J,K,X){super();this.kind=Z,this.key=Q,this.mapper=J,this.children=K,this.keyed_children=X}}class jZ extends I{constructor(Z,Q,J,K,X,G,V,W,Y,M){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=K,this.tag=X,this.attributes=G,this.children=V,this.keyed_children=W,this.self_closing=Y,this.void=M}}class AZ extends I{constructor(Z,Q,J,K){super();this.kind=Z,this.key=Q,this.mapper=J,this.content=K}}class DQ extends I{constructor(Z,Q,J,K,X,G,V){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=K,this.tag=X,this.attributes=G,this.inner_html=V}}function DK(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function c8(Z,Q){if(Q instanceof SZ)return new SZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof jZ)return new jZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof AZ)return new AZ(Q.kind,Z,Q.mapper,Q.content);else return new DQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var BZ=0;function MJ(Z,Q,J,K){return new SZ(BZ,Z,Q,J,K)}var KQ=1;function dQ(Z,Q,J,K,X,G,V,W,Y){return new jZ(KQ,Z,Q,J,K,w8(X),G,V,W,Y||DK(K,J))}var OQ=2;function UJ(Z,Q,J){return new AZ(OQ,Z,Q,J)}var p8=3;var FJ=(Z,Q)=>Z===Q,GQ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let J=typeof Z;if(J!==typeof Q)return!1;if(J!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return OK(Z,Q);return SK(Z,Q)},OK=(Z,Q)=>{let J=Z.length;if(J!==Q.length)return!1;while(J--)if(!GQ(Z[J],Q[J]))return!1;return!0},SK=(Z,Q)=>{let J=Object.keys(Z),K=J.length;if(Object.keys(Q).length!==K)return!1;while(K--){let X=J[K];if(!Object.hasOwn(Q,X))return!1;if(!GQ(Z[X],Q[X]))return!1}return!0};class fZ extends I{constructor(Z,Q,J){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=J}}function qJ(){return new fZ(MZ(),L,L)}function r8(Z){return new fZ(Z.handlers,Z.next_dispatched_paths,L)}function a8(Z,Q,J){return GJ(Z,HJ(Q,J))}function sQ(Z,Q,J){let K=a8(Z.handlers,Q,J);return new fZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function d8(Z,Q,J){return XZ(J,Z,(K,X)=>{if(X instanceof GZ){let G=X.name;return a8(K,Q,G)}else return K})}function lQ(Z,Q,J,K){let X=U(Q,Z.next_dispatched_paths),G=new fZ(Z.handlers,Z.dispatched_paths,X),V=mQ(G.handlers,Q+YJ+J);if(V instanceof y){let W=V[0];return[G,QQ(K,W)]}else return[G,new x(H([]))]}function S6(Z,Q){return m8(Q,Z.dispatched_paths)}function n8(Z,Q,J,K,X){return JQ(Z,HJ(J,K),R6(X,(G)=>{return new vQ(G.prevent_default,G.stop_propagation,l(Q)(G.message))}))}function rQ(Z,Q,J,K,X){let G=n8(Z.handlers,Q,J,K,X);return new fZ(G,Z.dispatched_paths,Z.next_dispatched_paths)}function s8(Z,Q,J,K){return XZ(K,Z,(X,G)=>{if(G instanceof GZ){let{name:V,handler:W}=G;return n8(X,Q,J,V,W)}else return X})}function dZ(Z,Q){let J=FJ(Z,l);if(FJ(Q,l))return Z;else if(J)return Q;else return(X)=>{return Z(Q(X))}}function l8(Z,Q,J,K){while(!0){let X=Z,G=Q,V=J,W=K;if(W instanceof z)return X;else{let{head:Y,tail:M}=W;Z=i8(X,G,V,Y),Q=G,J=V+1,K=M}}}function i8(Z,Q,J,K){if(K instanceof SZ){let X=K.children,G=OZ(Q,J,K.key);return l8(Z,G,0,X)}else if(K instanceof jZ){let{attributes:X,children:G}=K,V=OZ(Q,J,K.key),Y=d8(Z,V,X);return l8(Y,V,0,G)}else if(K instanceof AZ)return Z;else{let X=K.attributes,G=OZ(Q,J,K.key);return d8(Z,G,X)}}function vZ(Z,Q,J,K){let X=i8(Z.handlers,Q,J,K);return new fZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function RJ(Z,Q,J,K,X){while(!0){let G=Z,V=Q,W=J,Y=K,M=X;if(M instanceof z)return G;else{let{head:F,tail:q}=M;Z=o8(G,V,W,Y,F),Q=V,J=W,K=Y+1,X=q}}}function o8(Z,Q,J,K,X){if(X instanceof SZ){let G=X.children,V=OZ(J,K,X.key),W=dZ(Q,X.mapper);return RJ(Z,W,V,0,G)}else if(X instanceof jZ){let{attributes:G,children:V}=X,W=OZ(J,K,X.key),Y=dZ(Q,X.mapper),F=s8(Z,Y,W,G);return RJ(F,Y,W,0,V)}else if(X instanceof AZ)return Z;else{let G=X.attributes,V=OZ(J,K,X.key),W=dZ(Q,X.mapper);return s8(Z,W,V,G)}}function hZ(Z,Q,J,K,X){let G=o8(Z.handlers,Q,J,K,X);return new fZ(G,Z.dispatched_paths,Z.next_dispatched_paths)}function t8(Z){return hZ(qJ(),l,O6,0,Z)}function e8(Z,Q,J,K,X){let G=RJ(Z.handlers,Q,J,K,X);return new fZ(G,Z.dispatched_paths,Z.next_dispatched_paths)}function sZ(Z,Q,J){return dQ("",l,"",Z,Q,J,MZ(),!1,!1)}function h(Z){return UJ("",l,Z)}function Z9(){return UJ("",l,"")}function jQ(Z,Q){return sZ("h1",Z,Q)}function nQ(Z,Q){return sZ("h2",Z,Q)}function VZ(Z,Q){return sZ("div",Z,Q)}function _Z(Z,Q){return sZ("p",Z,Q)}function IJ(Z,Q){return sZ("span",Z,Q)}function iQ(Z,Q){return sZ("button",Z,Q)}class oQ extends I{constructor(Z,Q,J,K){super();this.index=Z,this.removed=Q,this.changes=J,this.children=K}}class J9 extends I{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class K9 extends I{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class X9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.added=Q,this.removed=J}}class G9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.before=J}}class V9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.index=Q,this.with=J}}class W9 extends I{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class Y9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.children=Q,this.before=J}}function zJ(Z,Q,J,K){return new oQ(Z,Q,J,K)}var NJ=0;function H9(Z){return new J9(NJ,Z)}var DJ=1;function M9(Z){return new K9(DJ,Z)}var OJ=2;function SJ(Z,Q){return new X9(OJ,Z,Q)}var jJ=3;function U9(Z,Q){return new G9(jJ,Z,Q)}var AJ=4;function F9(Z){return new W9(AJ,Z)}var BJ=5;function VQ(Z,Q){return new V9(BJ,Z,Q)}var PJ=6;function TJ(Z,Q){return new Y9(PJ,Z,Q)}class q9 extends I{constructor(Z,Q,J,K,X,G,V,W){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=J,this.observed_attributes=K,this.observed_properties=X,this.requested_contexts=G,this.provided_contexts=V,this.vdom=W}}class I9 extends I{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class z9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.data=J}}class N9 extends I{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}class j6 extends I{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class A6 extends I{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class B6 extends I{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class P6 extends I{constructor(Z,Q,J,K){super();this.kind=Z,this.path=Q,this.name=J,this.event=K}}class CJ extends I{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}var TK=0;function D9(Z,Q,J,K,X,G,V){return new q9(TK,Z,Q,J,K,X,G,V)}var CK=1;function LJ(Z){return new I9(CK,Z)}var LK=2;function O9(Z,Q){return new z9(LK,Z,Q)}var wK=3;function S9(Z,Q){return new N9(wK,Z,Q)}class T6 extends I{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class B9 extends I{constructor(Z,Q,J){super();this.added=Z,this.removed=Q,this.events=J}}function EK(Z,Q,J,K){if(J==="input"&&Q==="")return S6(Z,K);else if(J==="select"&&Q==="")return S6(Z,K);else if(J==="textarea"&&Q==="")return S6(Z,K);else return!1}function A9(Z,Q,J,K,X,G,V,W){while(!0){let Y=Z,M=Q,F=J,q=K,D=X,j=G,S=V,T=W;if(j instanceof z)if(D instanceof z)return new B9(S,T,q);else{let N=D.head;if(N instanceof GZ){let C=N,O=D.tail,B=N.name,w=U(C,T),R=sQ(q,M,B);Z=Y,Q=M,J=F,K=R,X=O,G=j,V=S,W=w}else{let C=N,O=D.tail,B=U(C,T);Z=Y,Q=M,J=F,K=q,X=O,G=j,V=S,W=B}}else if(D instanceof z){let N=j.head;if(N instanceof GZ){let C=N,O=j.tail,B=N.name,w=N.handler,R=U(C,S),A=rQ(q,F,M,B,w);Z=Y,Q=M,J=F,K=A,X=D,G=O,V=R,W=T}else{let C=N,O=j.tail,B=U(C,S);Z=Y,Q=M,J=F,K=q,X=D,G=O,V=B,W=T}}else{let{head:N,tail:C}=j,O=D.head,B=D.tail,w=D6(O,N);if(w instanceof a)if(O instanceof GZ){let R=O.name,A=U(O,T),P=sQ(q,M,R);Z=Y,Q=M,J=F,K=P,X=B,G=j,V=S,W=A}else{let R=U(O,T);Z=Y,Q=M,J=F,K=q,X=B,G=j,V=S,W=R}else if(w instanceof n)if(N instanceof xZ)if(O instanceof xZ){let R,A=N.name;if(A==="value")R=Y||O.value!==N.value;else if(A==="checked")R=Y||O.value!==N.value;else if(A==="selected")R=Y||O.value!==N.value;else R=O.value!==N.value;let P=R,k;if(P)k=U(N,S);else k=S;let b=k;Z=Y,Q=M,J=F,K=q,X=B,G=C,V=b,W=T}else if(O instanceof GZ){let R=O.name,A=U(N,S),P=U(O,T),k=sQ(q,M,R);Z=Y,Q=M,J=F,K=k,X=B,G=C,V=A,W=P}else{let R=U(N,S),A=U(O,T);Z=Y,Q=M,J=F,K=q,X=B,G=C,V=R,W=A}else if(N instanceof fQ)if(O instanceof fQ){let R,A=N.name;if(A==="scrollLeft")R=!0;else if(A==="scrollRight")R=!0;else if(A==="value")R=Y||!GQ(O.value,N.value);else if(A==="checked")R=Y||!GQ(O.value,N.value);else if(A==="selected")R=Y||!GQ(O.value,N.value);else R=!GQ(O.value,N.value);let P=R,k;if(P)k=U(N,S);else k=S;let b=k;Z=Y,Q=M,J=F,K=q,X=B,G=C,V=b,W=T}else if(O instanceof GZ){let R=O.name,A=U(N,S),P=U(O,T),k=sQ(q,M,R);Z=Y,Q=M,J=F,K=k,X=B,G=C,V=A,W=P}else{let R=U(N,S),A=U(O,T);Z=Y,Q=M,J=F,K=q,X=B,G=C,V=R,W=A}else if(O instanceof GZ){let{name:R,handler:A}=N,P=O.prevent_default.kind!==N.prevent_default.kind||O.stop_propagation.kind!==N.stop_propagation.kind||O.immediate!==N.immediate||O.debounce!==N.debounce||O.throttle!==N.throttle,k;if(P)k=U(N,S);else k=S;let b=k,v=rQ(q,F,M,R,A);Z=Y,Q=M,J=F,K=v,X=B,G=C,V=b,W=T}else{let{name:R,handler:A}=N,P=U(N,S),k=U(O,T),b=rQ(q,F,M,R,A);Z=Y,Q=M,J=F,K=b,X=B,G=C,V=P,W=k}else if(N instanceof GZ){let{name:R,handler:A}=N,P=U(N,S),k=rQ(q,F,M,R,A);Z=Y,Q=M,J=F,K=k,X=D,G=C,V=P,W=T}else{let R=U(N,S);Z=Y,Q=M,J=F,K=q,X=D,G=C,V=R,W=T}}}}function wJ(Z,Q,J,K,X,G,V,W,Y,M,F,q,D,j){while(!0){let S=Z,T=Q,N=J,C=K,O=X,B=G,w=V,R=W,A=Y,P=M,k=F,b=q,v=D,r=j;if(N instanceof z)if(S instanceof z)return new T6(new oQ(A,w,k,b),r);else{let{head:KZ,tail:kZ}=S,p;if(KZ.key===""||!$Q(O,KZ.key))p=w+1;else p=w;let E=p,$=vZ(r,P,R,KZ);Z=kZ,Q=T,J=N,K=C,X=O,G=B,V=E,W=R,Y=A,M=P,F=k,q=b,D=v,j=$}else if(S instanceof z){let KZ=e8(r,v,P,R,N),kZ=TJ(N,R-B),p=U(kZ,k);return new T6(new oQ(A,w,p,b),KZ)}else{let KZ=N.head,kZ=S.head;if(kZ.key!==KZ.key){let p=N.tail,c=S.tail,E=mQ(T,KZ.key),$=$Q(C,kZ.key);if(E instanceof y)if($){let f=E[0];if($Q(O,kZ.key))Z=c,Q=T,J=N,K=C,X=O,G=B-1,V=w,W=R,Y=A,M=P,F=k,q=b,D=v,j=r;else{let m=R-B,g=U(U9(KZ.key,m),k),d=JQ(O,KZ.key,void 0),u=B+1;Z=U(f,S),Q=T,J=N,K=C,X=d,G=u,V=w,W=R,Y=A,M=P,F=g,q=b,D=v,j=r}}else{let f=R-B,_=U(F9(f),k),m=vZ(r,P,R,kZ),g=B-1;Z=c,Q=T,J=N,K=C,X=O,G=g,V=w,W=R,Y=A,M=P,F=_,q=b,D=v,j=m}else if($){let f=R-B,_=hZ(r,v,P,R,KZ),m=TJ(H([KZ]),f),g=U(m,k);Z=S,Q=T,J=p,K=C,X=O,G=B+1,V=w,W=R+1,Y=A,M=P,F=g,q=b,D=v,j=_}else{let f=VQ(R-B,KZ),_,g=vZ(r,P,R,kZ);_=hZ(g,v,P,R,KZ);let d=_;Z=c,Q=T,J=p,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(f,k),q=b,D=v,j=d}}else{let p=S.head;if(p instanceof SZ){let c=N.head;if(c instanceof SZ){let E=c,$=N.tail,f=p,_=S.tail,m=dZ(v,E.mapper),g=OZ(P,R,E.key),d=wJ(f.children,f.keyed_children,E.children,E.keyed_children,MZ(),0,0,0,R,g,L,L,m,r),u,s=d.patch;if(s.children instanceof z)if(s.changes instanceof z)if(s.removed===0)u=b;else u=U(d.patch,b);else u=U(d.patch,b);else u=U(d.patch,b);let PZ=u;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=k,q=PZ,D=v,j=d.events}else{let E=c,$=N.tail,f=p,_=S.tail,m=VQ(R-B,E),g,u=vZ(r,P,R,f);g=hZ(u,v,P,R,E);let s=g;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(m,k),q=b,D=v,j=s}}else if(p instanceof jZ){let c=N.head;if(c instanceof jZ){let E=c,$=p;if($.namespace===E.namespace&&$.tag===E.tag){let f=N.tail,_=S.tail,m=dZ(v,E.mapper),g=OZ(P,R,E.key),d=EK(r,E.namespace,E.tag,g),u=A9(d,g,m,r,$.attributes,E.attributes,L,L),s,yZ,PZ;s=u.added,yZ=u.removed,PZ=u.events;let rZ;if(yZ instanceof z&&s instanceof z)rZ=L;else rZ=H([SJ(s,yZ)]);let MQ=rZ,UQ=wJ($.children,$.keyed_children,E.children,E.keyed_children,MZ(),0,0,0,R,g,MQ,L,m,PZ),$Z,aZ=UQ.patch;if(aZ.children instanceof z)if(aZ.changes instanceof z)if(aZ.removed===0)$Z=b;else $Z=U(UQ.patch,b);else $Z=U(UQ.patch,b);else $Z=U(UQ.patch,b);let t9=$Z;Z=_,Q=T,J=f,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=k,q=t9,D=v,j=UQ.events}else{let f=c,_=N.tail,m=p,g=S.tail,d=VQ(R-B,f),u,yZ=vZ(r,P,R,m);u=hZ(yZ,v,P,R,f);let PZ=u;Z=g,Q=T,J=_,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(d,k),q=b,D=v,j=PZ}}else{let E=c,$=N.tail,f=p,_=S.tail,m=VQ(R-B,E),g,u=vZ(r,P,R,f);g=hZ(u,v,P,R,E);let s=g;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(m,k),q=b,D=v,j=s}}else if(p instanceof AZ){let c=N.head;if(c instanceof AZ){let E=c;if(p.content===E.content){let f=N.tail;Z=S.tail,Q=T,J=f,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=k,q=b,D=v,j=r}else{let f=c,_=N.tail,m=S.tail,g=zJ(R,0,H([H9(f.content)]),L);Z=m,Q=T,J=_,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=k,q=U(g,b),D=v,j=r}}else{let E=c,$=N.tail,f=p,_=S.tail,m=VQ(R-B,E),g,u=vZ(r,P,R,f);g=hZ(u,v,P,R,E);let s=g;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(m,k),q=b,D=v,j=s}}else{let c=N.head;if(c instanceof DQ){let E=c,$=N.tail,f=p,_=S.tail,m=dZ(v,E.mapper),g=OZ(P,R,E.key),d=A9(!1,g,m,r,f.attributes,E.attributes,L,L),u,s,yZ;u=d.added,s=d.removed,yZ=d.events;let PZ;if(s instanceof z&&u instanceof z)PZ=L;else PZ=H([SJ(u,s)]);let rZ=PZ,MQ;if(f.inner_html===E.inner_html)MQ=rZ;else MQ=U(M9(E.inner_html),rZ);let $Z=MQ,aZ;if($Z instanceof z)aZ=b;else aZ=U(zJ(R,0,$Z,H([])),b);let pJ=aZ;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=k,q=pJ,D=v,j=yZ}else{let E=c,$=N.tail,f=p,_=S.tail,m=VQ(R-B,E),g,u=vZ(r,P,R,f);g=hZ(u,v,P,R,E);let s=g;Z=_,Q=T,J=$,K=C,X=O,G=B,V=w,W=R+1,Y=A,M=P,F=U(m,k),q=b,D=v,j=s}}}}}}function AQ(Z,Q,J){return wJ(H([Q]),MZ(),H([J]),MZ(),MZ(),0,0,0,0,O6,L,L,l,r8(Z))}var{setTimeout:xK,clearTimeout:EJ}=globalThis,kK=(Z,Q)=>qZ().createElementNS(Z,Q),yK=(Z)=>qZ().createTextNode(Z),bK=()=>qZ().createDocumentFragment(),BQ=(Z,Q,J)=>Z.insertBefore(Q,J),T9=A8?(Z,Q,J)=>Z.moveBefore(Q,J):BQ,gK=(Z,Q)=>Z.removeChild(Q),fK=(Z,Q)=>Z.getAttribute(Q),C9=(Z,Q,J)=>Z.setAttribute(Q,J),vK=(Z,Q)=>Z.removeAttribute(Q),hK=(Z,Q,J,K)=>Z.addEventListener(Q,J,K),L9=(Z,Q,J)=>Z.removeEventListener(Q,J),_K=(Z,Q)=>Z.innerHTML=Q,uK=(Z,Q)=>Z.data=Q,uZ=Symbol("lustre");class x9{constructor(Z,Q,J,K){this.kind=Z,this.key=K,this.parent=Q,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===BZ?this.node.parentNode:this.node}}var mZ=(Z,Q,J,K,X)=>{let G=new x9(Z,Q,J,X);return J[uZ]=G,Q?.children.splice(K,0,G),G},mK=(Z)=>{let Q="";for(let J=Z[uZ];J.parent;J=J.parent)if(J.key)Q=`${pQ}${J.key}${Q}`;else{let K=J.parent.children.indexOf(J);Q=`${pQ}${K}${Q}`}return Q.slice(1)};class kJ{#Z=null;#X=()=>{};#K=!1;#J=!1;constructor(Z,Q,{useServerEvents:J=!1,exposeKeys:K=!1}={}){this.#Z=Z,this.#X=Q,this.#K=J,this.#J=K}mount(Z){mZ(KQ,null,this.#Z,0,null),this.#D(this.#Z,null,this.#Z[uZ],0,Z)}push(Z){this.#Q.push({node:this.#Z[uZ],patch:Z}),this.#G()}#Q=[];#G(){let Z=this.#Q;while(Z.length){let{node:Q,patch:J}=Z.pop(),{children:K}=Q,{changes:X,removed:G,children:V}=J;if(WQ(X,(W)=>this.#W(Q,W)),G)this.#q(Q,K.length-G,G);WQ(V,(W)=>{let Y=K[W.index|0];this.#Q.push({node:Y,patch:W})})}}#W(Z,Q){switch(Q.kind){case NJ:this.#B(Z,Q);break;case DJ:this.#O(Z,Q);break;case OJ:this.#I(Z,Q);break;case jJ:this.#M(Z,Q);break;case AJ:this.#F(Z,Q);break;case BJ:this.#U(Z,Q);break;case PJ:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:J}){let K=bK(),X=this.#H(Z,J);this.#N(K,null,Z,J|0,Q),BQ(Z.parentNode,K,X)}#U(Z,{index:Q,with:J}){this.#q(Z,Q|0,1);let K=this.#H(Z,Q);this.#D(Z.parentNode,K,Z,Q|0,J)}#H(Z,Q){Q=Q|0;let{children:J}=Z,K=J.length;if(Q<K)return J[Q].node;let X=J[K-1];if(!X&&Z.kind!==BZ)return null;if(!X)X=Z;while(X.kind===BZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#M(Z,{key:Q,before:J}){J=J|0;let{children:K,parentNode:X}=Z,G=K[J].node,V=K[J];for(let F=J+1;F<K.length;++F){let q=K[F];if(K[F]=V,V=q,q.key===Q){K[J]=q;break}}let{kind:W,node:Y,children:M}=V;if(T9(X,Y,G),W===BZ)this.#V(X,M,G)}#V(Z,Q,J){for(let K=0;K<Q.length;++K){let{kind:X,node:G,children:V}=Q[K];if(T9(Z,G,J),X===BZ)this.#V(Z,V,J)}}#F(Z,{index:Q}){this.#q(Z,Q,1)}#q(Z,Q,J){let{children:K,parentNode:X}=Z,G=K.splice(Q,J);for(let V=0;V<G.length;++V){let{kind:W,node:Y,children:M}=G[V];if(gK(X,Y),this.#R(G[V]),W===BZ)G.push(...M)}}#R(Z){let{debouncers:Q,children:J}=Z;for(let{timeout:K}of Q.values())if(K)EJ(K);Q.clear(),WQ(J,(K)=>this.#R(K))}#I({node:Z,handlers:Q,throttles:J,debouncers:K},{added:X,removed:G}){WQ(G,({name:V})=>{if(Q.delete(V))L9(Z,V,xJ),this.#z(J,V,0),this.#z(K,V,0);else vK(Z,V),E9[V]?.removed?.(Z,V)}),WQ(X,(V)=>this.#A(Z,V))}#B({node:Z},{content:Q}){uK(Z,Q??"")}#O({node:Z},{inner_html:Q}){_K(Z,Q??"")}#N(Z,Q,J,K,X){WQ(X,(G)=>this.#D(Z,Q,J,K++,G))}#D(Z,Q,J,K,X){switch(X.kind){case KQ:{let G=this.#S(J,K,X);this.#N(G,null,G[uZ],0,X.children),BQ(Z,G,Q);break}case OQ:{let G=this.#j(J,K,X);BQ(Z,G,Q);break}case BZ:{let G=this.#j(J,K,X);BQ(Z,G,Q),this.#N(Z,Q,G[uZ],0,X.children);break}case p8:{let G=this.#S(J,K,X);this.#O({node:G},X),BQ(Z,G,Q);break}}}#S(Z,Q,{kind:J,key:K,tag:X,namespace:G,attributes:V}){let W=kK(G||I6,X);if(mZ(J,Z,W,Q,K),this.#J&&K)C9(W,"data-lustre-key",K);return WQ(V,(Y)=>this.#A(W,Y)),W}#j(Z,Q,{kind:J,key:K,content:X}){let G=yK(X??"");return mZ(J,Z,G,Q,K),G}#A(Z,Q){let{debouncers:J,handlers:K,throttles:X}=Z[uZ],{kind:G,name:V,value:W,prevent_default:Y,debounce:M,throttle:F}=Q;switch(G){case t6:{let q=W??"";if(V==="virtual:defaultValue"){Z.defaultValue=q;return}if(q!==fK(Z,V))C9(Z,V,q);E9[V]?.added?.(Z,q);break}case e6:Z[V]=W;break;case ZJ:{if(K.has(V))L9(Z,V,xJ);let q=Y.kind===QJ;hK(Z,V,xJ,{passive:q}),this.#z(X,V,F),this.#z(J,V,M),K.set(V,(D)=>this.#P(Q,D));break}}}#z(Z,Q,J){let K=Z.get(Q);if(J>0)if(K)K.delay=J;else Z.set(Q,{delay:J});else if(K){let{timeout:X}=K;if(X)EJ(X);Z.delete(Q)}}#P(Z,Q){let{currentTarget:J,type:K}=Q,{debouncers:X,throttles:G}=J[uZ],V=mK(J),{prevent_default:W,stop_propagation:Y,include:M,immediate:F}=Z;if(W.kind===KJ)Q.preventDefault();if(Y.kind===KJ)Q.stopPropagation();if(K==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let q=this.#K?$K(Q,M??[]):Q,D=G.get(K);if(D){let S=Date.now(),T=D.last||0;if(S>T+D.delay)D.last=S,D.lastEvent=Q,this.#X(q,V,K,F)}let j=X.get(K);if(j)EJ(j.timeout),j.timeout=xK(()=>{if(Q===G.get(K)?.lastEvent)return;this.#X(q,V,K,F)},j.delay);if(!D&&!j)this.#X(q,V,K,F)}}var WQ=(Z,Q)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)Q(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},xJ=(Z)=>{let{currentTarget:Q,type:J}=Z;Q[uZ].handlers.get(J)(Z)},$K=(Z,Q=[])=>{let J={};if(Z.type==="input"||Z.type==="change")Q.push("target.value");if(Z.type==="submit")Q.push("detail.formData");for(let K of Q){let X=K.split(".");for(let G=0,V=Z,W=J;G<X.length;G++){if(G===X.length-1){W[X[G]]=V[X[G]];break}W=W[X[G]]??={},V=V[X[G]]}}return J},w9=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},cK=(Z)=>{return{added(Q,J){Q[Z]=J}}},E9={checked:w9("checked"),selected:w9("selected"),value:cK("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function pK(Z,Q,J){while(!0){let K=Z,X=Q,G=J;if(K instanceof z)return[X,i(G)];else{let V=K.tail,W=K.head[0],Y=K.head[1],M=c8(W,Y),F;if(W==="")F=X;else F=JQ(X,W,M);let q=F,D=U(M,G);Z=V,Q=q,J=D}}}function yJ(Z){return pK(Z,MZ(),L)}function k9(Z,Q,J){let K=yJ(J),X,G;return X=K[0],G=K[1],dQ("",l,"",Z,Q,G,X,!1,!1)}function y9(Z,Q,J,K){let X=yJ(K),G,V;return G=X[0],V=X[1],dQ("",l,Z,Q,J,V,G,!1,!1)}function b9(Z){let Q=yJ(Z),J,K;return J=Q[0],K=Q[1],MJ("",l,K,J)}var g9=(Z)=>{let Q=mZ(KQ,null,Z,0,null),J=0;for(let V=Z.firstChild;V;V=V.nextSibling)if(f9(V))J+=1;if(J===0){let V=qZ().createTextNode("");return mZ(OQ,Q,V,0,null),Z.replaceChildren(V),Z9()}if(J===1)return bJ(Q,Z).head[1];let K=qZ().createTextNode(""),X=mZ(BZ,Q,K,0,null),G=bJ(X,Z);return Z.insertBefore(K,Z.firstChild),b9(G)},f9=(Z)=>{switch(Z.nodeType){case z6:return!0;case n6:return!!Z.data;default:return!1}},dK=(Z,Q,J,K)=>{if(!f9(Q))return null;switch(Q.nodeType){case z6:{let X=mZ(KQ,Z,Q,K,J),G=Q.localName,V=Q.namespaceURI,W=!V||V===I6;if(W&&sK.includes(G))lK(G,Q);let Y=rK(Q),M=bJ(X,Q);return W?k9(G,Y,M):y9(V,G,Y,M)}case n6:return mZ(OQ,Z,Q,K,null),h(Q.data);default:return null}},sK=["input","select","textarea"],lK=(Z,Q)=>{let{value:J,checked:K}=Q;if(Z==="input"&&Q.type==="checkbox"&&!K)return;if(Z==="input"&&Q.type==="radio"&&!K)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!J)return;queueMicrotask(()=>{if(Q.value=J,Q.checked=K,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),qZ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},bJ=(Z,Q)=>{let J=null,K=Q.firstChild,X=null,G=0;while(K){let V=K.nodeType===z6?K.getAttribute("data-lustre-key"):null;if(V!=null)K.removeAttribute("data-lustre-key");let W=dK(Z,K,V,G),Y=K.nextSibling;if(W){let M=new zZ([V??"",W],null);if(X)X=X.tail=M;else X=J=M;G+=1}else Q.removeChild(K);K=Y}if(!X)return L;return X.tail=L,J},rK=(Z)=>{let Q=Z.attributes.length,J=L;while(Q-- >0){let K=Z.attributes[Q];if(K.name==="xmlns")continue;J=new zZ(aK(K),J)}return J},aK=(Z)=>{let{localName:Q,value:J}=Z;return hQ(Q,J)};var tQ=()=>!!qZ();class C6{constructor(Z,[Q,J],K,X){this.root=Z,this.#Z=Q,this.#X=K,this.#K=X,this.root.addEventListener("context-request",(G)=>{if(!(G.context&&G.callback))return;if(!this.#W.has(G.context))return;G.stopImmediatePropagation();let V=this.#W.get(G.context);if(G.subscribe){let W=()=>{V.subscribers=V.subscribers.filter((Y)=>Y!==G.callback)};V.subscribers.push([G.callback,W]),G.callback(V.value,W)}else G.callback(V.value)}),this.#G=new kJ(this.root,(G,V,W)=>{let[Y,M]=lQ(this.#Q,V,W,G);if(this.#Q=Y,M.isOk()){let F=M[0];if(F.stop_propagation)G.stopPropagation();if(F.prevent_default)G.preventDefault();this.dispatch(F.message,!1)}}),this.#J=g9(this.root),this.#Q=qJ(),this.#F=!0,this.#R(J)}root=null;dispatch(Z,Q=!1){if(this.#F||=Q,this.#Y)this.#U.push(Z);else{let[J,K]=this.#K(this.#Z,Z);this.#Z=J,this.#R(K)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#W.has(Z))this.#W.set(Z,{value:Q,subscribers:[]});else{let J=this.#W.get(Z);J.value=Q;for(let K=J.subscribers.length-1;K>=0;K--){let[X,G]=J.subscribers[K];if(!X){J.subscribers.splice(K,1);continue}X(Q,G)}}}#Z;#X;#K;#J;#Q;#G;#W=new Map;#Y=!1;#U=[];#H=L;#M=L;#V=null;#F=!1;#q={dispatch:(Z,Q)=>this.dispatch(Z,Q),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#R(Z){this.#Y=!0;while(!0){for(let Q=Z.synchronous;Q.tail;Q=Q.tail)Q.head(this.#q);if(this.#H=h9(this.#H,Z.before_paint),this.#M=h9(this.#M,Z.after_paint),!this.#U.length)break;[this.#Z,Z]=this.#K(this.#Z,this.#U.shift())}if(this.#Y=!1,this.#F)cancelAnimationFrame(this.#V),this.#I();else if(!this.#V)this.#V=requestAnimationFrame(()=>{this.#I()})}#I(){this.#F=!1,this.#V=null;let Z=this.#X(this.#Z),{patch:Q,events:J}=AQ(this.#Q,this.#J,Z);if(this.#Q=J,this.#J=Z,this.#G.push(Q),this.#H instanceof zZ){let K=v9(this.#H);this.#H=L,queueMicrotask(()=>{this.#F=!0,this.#R(K)})}if(this.#M instanceof zZ){let K=v9(this.#M);this.#M=L,requestAnimationFrame(()=>{this.#F=!0,this.#R(K)})}}}function v9(Z){return{synchronous:Z,after_paint:L,before_paint:L}}function h9(Z,Q){if(Z instanceof z)return Q;else if(Q instanceof z)return Z;else return d6(Z,Q)}class fJ extends I{constructor(Z){super();this.message=Z}}class vJ extends I{constructor(Z){super();this.callback=Z}}class hJ extends I{constructor(Z){super();this.callback=Z}}class lZ extends I{constructor(Z){super();this.message=Z}}class YQ extends I{constructor(Z,Q){super();this.name=Z,this.data=Q}}class L6 extends I{constructor(Z,Q){super();this.key=Z,this.value=Q}}class HQ extends I{}class u9 extends I{constructor(Z,Q,J,K,X,G,V,W,Y,M){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=J,this.attributes=K,this.properties=X,this.contexts=G,this.is_form_associated=V,this.on_form_autofill=W,this.on_form_reset=Y,this.on_form_restore=M}}function m9(Z){let Q=new u9(!0,!0,!1,L,L,L,!1,N6,N6,N6);return XZ(Z,Q,(J,K)=>{return K.apply(J)})}class c9{#Z;constructor(Z,[Q,J],K,X){this.#Z=new C6(Z,[Q,J],X,K)}send(Z){switch(Z.constructor){case lZ:{this.dispatch(Z.message,!1);break}case YQ:{this.emit(Z.name,Z.data);break}case HQ:break}}dispatch(Z,Q){this.#Z.dispatch(Z,Q)}emit(Z,Q){this.#Z.emit(Z,Q)}}var p9=({init:Z,update:Q,view:J},K,X)=>{if(!tQ())return new x(new eQ);let G=K instanceof HTMLElement?K:qZ().querySelector(K);if(!G)return new x(new _J(K));return new y(new c9(G,Z(X),Q,J))};class nK{#Z;#X;#K;#J;#Q;#G;#W=FQ();#Y=new Set;constructor([Z,Q],J,K,X){this.#Z=Z,this.#X=J,this.#K=K,this.#J=X,this.#Q=this.#K(this.#Z),this.#G=t8(this.#Q),this.#V(Q)}send(Z){switch(Z.constructor){case fJ:{let{message:Q}=Z,J=this.#U(Q),K=AQ(this.#G,this.#Q,J);this.#Q=J,this.#G=K.events,this.broadcast(LJ(K.patch));return}case vJ:{let{callback:Q}=Z;this.#Y.add(Q),Q(D9(this.#J.open_shadow_root,this.#J.adopt_styles,xQ(this.#J.attributes),xQ(this.#J.properties),xQ(this.#J.contexts),this.#W,this.#Q));return}case hJ:{let{callback:Q}=Z;this.#Y.delete(Q);return}case lZ:{let{message:Q}=Z,[J,K]=this.#X(this.#Z,Q),X=this.#K(J),G=AQ(this.#G,this.#Q,X);this.#V(K),this.#Z=J,this.#Q=X,this.#G=G.events,this.broadcast(LJ(G.patch));return}case YQ:{let{name:Q,data:J}=Z;this.broadcast(O9(Q,J));return}case L6:{let{key:Q,value:J}=Z;this.#W=EQ(this.#W,Q,J),this.broadcast(S9(Q,J));return}case HQ:{this.#Z=null,this.#X=null,this.#K=null,this.#J=null,this.#Q=null,this.#G=null,this.#W=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#U(Z){switch(Z.constructor){case j6:{let{messages:Q}=Z,J=this.#Z,K=_Q();for(let X=Q;X.head;X=X.tail){let G=this.#U(X.head);if(G instanceof y){J=G[0][0],K=h8(IZ.fromArray([K,G[0][1]]));break}}return this.#V(K),this.#Z=J,this.#K(this.#Z)}case A6:{let{name:Q,value:J}=Z,K=this.#H(Q,J);if(K instanceof x)return this.#Q;else{let[X,G]=this.#X(this.#Z,K[0]);return this.#V(G),this.#Z=X,this.#K(this.#Z)}}case B6:{let{name:Q,value:J}=Z,K=this.#M(Q,J);if(K instanceof x)return this.#Q;else{let[X,G]=this.#X(this.#Z,K[0]);return this.#V(G),this.#Z=X,this.#K(this.#Z)}}case P6:{let{path:Q,name:J,event:K}=Z,[X,G]=lQ(this.#G,Q,J,K);if(this.#G=X,G instanceof x)return this.#Q;else{let[V,W]=this.#X(this.#Z,G[0].message);return this.#V(W),this.#Z=V,this.#K(this.#Z)}}case CJ:{let{key:Q,value:J}=Z,K=pZ(this.#J.contexts,Q);if(K instanceof x)return this.#Q;if(K=QQ(J,K[0]),K instanceof x)return this.#Q;let[X,G]=this.#X(this.#Z,K[0]);return this.#V(G),this.#Z=X,this.#K(this.#Z)}}}#H(Z,Q){let J=pZ(this.#J.attributes,Z);switch(J.constructor){case y:return J[0](Q);case x:return new x(void 0)}}#M(Z,Q){let J=pZ(this.#J.properties,Z);switch(J.constructor){case y:return J[0](Q);case x:return new x(void 0)}}#V(Z){let Q=(V)=>this.send(new lZ(V)),J=(V,W)=>this.send(new YQ(V,W)),K=()=>{return},X=()=>{return},G=(V,W)=>this.send(new L6(V,W));globalThis.queueMicrotask(()=>{f8(Z,Q,J,K,X,G)})}}class d9 extends I{constructor(Z,Q,J,K){super();this.init=Z,this.update=Q,this.view=J,this.config=K}}class _J extends I{constructor(Z){super();this.selector=Z}}class eQ extends I{}function iK(Z,Q,J){return new d9(Z,Q,J,m9(L))}function s9(Z,Q,J){return iK((G)=>{return[Z(G),_Q()]},(G,V)=>{return[Q(G,V),_Q()]},J)}function l9(Z,Q,J){return O8(!tQ(),new x(new eQ),()=>{return p9(Z,Q,J)})}function eK(Z){if(Z==="input")return!0;else if(Z==="change")return!0;else if(Z==="focus")return!0;else if(Z==="focusin")return!0;else if(Z==="focusout")return!0;else if(Z==="blur")return!0;else if(Z==="select")return!0;else return!1}function ZX(Z,Q){return k8(Z,R6(Q,(J)=>{return new vQ(!1,!1,J)}),L,JJ,JJ,eK(Z),0,0)}function Z6(Z){return ZX("click",r6(Z))}var JX="src/mots.gleam";class PQ extends I{constructor(Z,Q){super();this.catalan=Z,this.english=Q}}class J6 extends I{}class K6 extends I{}class uJ extends I{}class Q6 extends I{constructor(Z,Q,J,K,X,G,V){super();this.words=Z,this.current_index=Q,this.guessed_letters=J,this.attempts_left=K,this.max_attempts=X,this.total_won=G,this.total_lost=V}}class $J extends I{constructor(Z){super();this[0]=Z}}class w6 extends I{}class r9 extends I{}function a9(Z){let Q=H([new PQ("gat","cat"),new PQ("gos","dog"),new PQ("casa","house"),new PQ("aigua","water"),new PQ("menjar","food")]);return new Q6(Q,0,H([]),6,6,0,0)}function KX(Z,Q){while(!0){let J=Z,K=Q;if(J instanceof z)return new x(void 0);else{let{head:X,tail:G}=J;if(K===0)return new y(X);else Z=G,Q=K-1}}}function cJ(Z){return KX(Z.words,Z.current_index)}function n9(Z,Q){let K=M6(Z),X=tZ(K,(G)=>{let V=ZQ(G);if(Y6(Q,V))return G;else return"_"});return bQ(X," ")}function XX(Z,Q){let K=ZQ(Q);return F6(K,ZQ(Z))}function GX(Z,Q){let J=n9(Z,Q);return!F6(J,"_")}function mJ(Z){let Q=cJ(Z);if(Q instanceof y){let J=Q[0];if(GX(J.english,Z.guessed_letters))return new J6;else if(Z.attempts_left<=0)return new K6;else return new uJ}else return new uJ}function VX(Z,Q){if(Q instanceof $J){let J=Q[0],K=ZQ(J),X=Y6(Z.guessed_letters,K),G=mJ(Z);if(X)return Z;else if(G instanceof J6)return Z;else if(G instanceof K6)return Z;else{let V=cJ(Z);if(V instanceof y){let W=V[0],Y=U(K,Z.guessed_letters);if(XX(K,W.english))return new Q6(Z.words,Z.current_index,Y,Z.attempts_left,Z.max_attempts,Z.total_won,Z.total_lost);else return new Q6(Z.words,Z.current_index,Y,Z.attempts_left-1,Z.max_attempts,Z.total_won,Z.total_lost)}else return Z}}else if(Q instanceof w6){let J=mJ(Z),K;if(J instanceof J6)K=Z.total_won+1;else K=Z.total_won;let X=K,G;if(J instanceof K6)G=Z.total_lost+1;else G=Z.total_lost;let V=G;return new Q6(Z.words,Z.current_index+1,H([]),Z.max_attempts,Z.max_attempts,X,V)}else return a9(void 0)}function WX(){return VZ(H([o("header")]),H([jQ(H([]),H([h("\uD83C\uDFAE Mots \uD83C\uDFAE")])),_Z(H([]),H([h("Learn English words from Catalan")]))]))}function YX(Z){return VZ(H([o("score")]),H([IJ(H([]),H([h("Won: "+HZ(Z.total_won))])),IJ(H([]),H([h("Lost: "+HZ(Z.total_lost))]))]))}function i9(Z){if(Z.current_index+1<K8(Z.words))return iQ(H([o("next-button"),Z6(new w6)]),H([h("Next Word →")]));else return iQ(H([o("next-button"),Z6(new w6)]),H([h("See Results")]))}function HX(Z,Q){return VZ(H([o("game result-won")]),H([jQ(H([]),H([h("\uD83C\uDF89")])),nQ(H([]),H([h("Correct!")])),_Z(H([]),H([h("The word is: "+Q.english)])),i9(Z)]))}function MX(Z,Q){return VZ(H([o("game result-lost")]),H([jQ(H([]),H([h("❌")])),nQ(H([]),H([h("Game Over!")])),_Z(H([]),H([h("The word was: "+Q.english)])),i9(Z)]))}function UX(Z){let Q=Z.total_won+Z.total_lost,J;if(Q>0)J=G6(Z.total_won*100,Q);else J=0;let X=J;return VZ(H([o("game game-complete")]),H([jQ(H([]),H([h("\uD83C\uDFC1")])),nQ(H([]),H([h("Game Complete!")])),VZ(H([o("final-score")]),H([_Z(H([]),H([h("Words won: "+HZ(Z.total_won))])),_Z(H([]),H([h("Words lost: "+HZ(Z.total_lost))])),_Z(H([]),H([h("Success rate: "+HZ(X)+"%")]))])),iQ(H([o("restart-button"),Z6(new r9)]),H([h("Play Again")]))]))}function FX(Z){let Q=H(["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]);return VZ(H([o("keyboard")]),tZ(Q,(J)=>{let K=Y6(Z.guessed_letters,J),X;if(K)X="key key-disabled";else X="key";return iQ(H([o(X),b8(K),Z6(new $J(J))]),H([h(U6(J))]))}))}function RX(Z,Q){return VZ(H([o("game")]),H([VZ(H([o("catalan-word")]),H([nQ(H([]),H([h("Catalan: "+Q.catalan)]))])),VZ(H([o("english-word")]),H([jQ(H([]),H([h(n9(Q.english,Z.guessed_letters))]))])),VZ(H([o("attempts")]),H([_Z(H([]),H([h("Attempts left: "+HZ(Z.attempts_left))]))])),FX(Z),VZ(H([o("guessed")]),H([_Z(H([]),H([h("Guessed: "+bQ(Z.guessed_letters,", "))]))]))]))}function qX(Z){let Q=cJ(Z);if(Q instanceof y){let J=Q[0],K=mJ(Z);if(K instanceof J6)return HX(Z,J);else if(K instanceof K6)return MX(Z,J);else return RX(Z,J)}else return UX(Z)}function IX(Z){return VZ(H([o("container")]),H([WX(),YX(Z),qX(Z)]))}function o9(){let Z=s9(a9,VX,IX),Q=l9(Z,"#app",void 0);if(!(Q instanceof y))throw k6("let_assert",JX,"mots",362,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:8745,end:8794,pattern_start:8756,pattern_end:8761});return}o9();
